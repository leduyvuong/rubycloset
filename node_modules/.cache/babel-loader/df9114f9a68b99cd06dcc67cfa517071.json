{"ast":null,"code":"var _jsxFileName = \"/home/leduyvuong/Project/drinks_foods_GT01_LarVue/fooddrink/src/components/Admin/Dashboard/Dashboard.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./Dashboard.scss\";\nimport queryString from \"query-string\";\nimport Pagination from \"../../share/Pagination\";\nimport { useTranslation } from \"react-i18next\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const [userList, setUserList] = useState([]);\n  const [totalUser, setTotalUser] = useState(0);\n  const [filters, setFilters] = useState({\n    page: 1,\n    filter: \"\"\n  });\n\n  function handleStatusClick(id) {\n    const requestUrl = \"http://localhost:3001/api/v1/users/\" + id;\n    axios.delete(requestUrl).then(res => {\n      const resJSON = JSON.parse(JSON.stringify(res.data));\n      let userListNew = userList;\n      let user = userListNew.find(user => user.id = id);\n      userListNew.find(user => user.id = id).status = resJSON.user.status; // setUserList(userListNew);\n      // setUserList(userList.find(user => {\n      //   if (user.id === id) {\n      //     user.status = resJSON.status;\n      //   }\n      // }))\n\n      console.log(userListNew.find(user => user.id = id).status);\n    }).catch(error => console.log(error));\n  }\n\n  function handleClickPage(page) {\n    setFilters({ ...filters,\n      page: page\n    });\n  }\n\n  useEffect(() => {\n    const filterString = queryString.stringify(filters);\n    const requestUrl = `/api/v1/users?${filterString}`;\n    axios.get(requestUrl).then(res => {\n      const resJson = JSON.parse(JSON.stringify(res.data));\n      setUserList(resJson.lists);\n      console.log(userList.length);\n      setTotalUser(resJson.totalUser);\n    }).catch(error => console.log(error));\n  }, [filters]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-user bg-light\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            float: \"right\"\n          },\n          className: \"result-show-message\",\n          children: [\"Showing 1\\u2013\", userList.length, \" of \", totalUser, \" results\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-bordered table-striped table-inverse\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"thead-inverse\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: t(\"useradmin.username\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: t(\"useradmin.email\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: t(\"useradmin.role\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: t(\"useradmin.status\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: t(\"useradmin.action\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: userList.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              scope: \"row\",\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.role == \"admin\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-success\",\n                children: t(\"useradmin.admin\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-info\",\n                children: t(\"useradmin.customer\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: user.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/admin/users/\" + user.id,\n                className: \"btn btn-primary\",\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 21\n              }, this), user.status == 1 ? /*#__PURE__*/_jsxDEV(\"a\", {\n                onClick: () => handleStatusClick(user.id),\n                className: \"btn btn-danger\",\n                children: \"Unactive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n                onClick: () => handleStatusClick(user.id),\n                className: \"btn btn-success\",\n                children: \"Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this)]\n          }, user.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      total: totalUser,\n      handleClickPage: handleClickPage,\n      limit: 9\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"lsWeb7pMg8k9v9Vp5DKIBECnhHw=\", false, function () {\n  return [useTranslation];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/home/leduyvuong/Project/drinks_foods_GT01_LarVue/fooddrink/src/components/Admin/Dashboard/Dashboard.tsx"],"names":["axios","React","useEffect","useState","queryString","Pagination","useTranslation","Dashboard","t","userList","setUserList","totalUser","setTotalUser","filters","setFilters","page","filter","handleStatusClick","id","requestUrl","delete","then","res","resJSON","JSON","parse","stringify","data","userListNew","user","find","status","console","log","catch","error","handleClickPage","filterString","get","resJson","lists","length","float","map","username","email","role"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport \"./Dashboard.scss\"\nimport queryString from \"query-string\"\nimport Pagination from \"../../share/Pagination\";\nimport { useTranslation } from \"react-i18next\";\n\nconst Dashboard: React.FC = () => {\n  const { t } = useTranslation();\n  const [userList, setUserList] = useState([] as any[]);\n  const [totalUser, setTotalUser] = useState(0);\n  const [filters, setFilters] = useState({\n    page: 1,\n    filter: \"\"\n  })\n\n  function handleStatusClick(id: string) {\n    const requestUrl = \"http://localhost:3001/api/v1/users/\" + id;\n    axios.delete(requestUrl)\n      .then(res => {\n        const resJSON = JSON.parse(JSON.stringify(res.data));\n        let userListNew = userList;\n        let user = userListNew.find(user => user.id = id);\n        userListNew.find(user => user.id = id).status = resJSON.user.status;\n        // setUserList(userListNew);\n        // setUserList(userList.find(user => {\n        //   if (user.id === id) {\n        //     user.status = resJSON.status;\n        //   }\n        // }))\n        console.log(userListNew.find(user => user.id = id).status)\n      })\n      .catch(error => console.log(error))\n\n  }\n\n  function handleClickPage(page: number) {\n    setFilters({\n      ...filters,\n      page: page\n    })\n  }\n\n  useEffect(() => {\n    const filterString = queryString.stringify(filters);\n    const requestUrl = `/api/v1/users?${filterString}`\n    axios.get(requestUrl)\n      .then(res => {\n        const resJson = JSON.parse(JSON.stringify(res.data))\n        setUserList(resJson.lists);\n        console.log(userList.length);\n        setTotalUser(resJson.totalUser);\n      })\n      .catch(error => console.log(error))\n  }, [filters])\n  return (\n    <div >\n      <div className=\"table-user bg-light\">\n        <div className=\"col-md-12\" >\n          <p style={{ float: \"right\" }} className=\"result-show-message\">Showing 1–{userList.length} of {totalUser} results</p>\n        </div>\n        <table className=\"table table-bordered table-striped table-inverse\">\n          <thead className=\"thead-inverse\">\n            <tr>\n              <th>{t(\"useradmin.username\")}</th>\n              <th>{t(\"useradmin.email\")}</th>\n              <th>{t(\"useradmin.role\")}</th>\n              <th>{t(\"useradmin.status\")}</th>\n              <th>{t(\"useradmin.action\")}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              userList.map(user => (\n                <tr key={user.id}>\n                  <td scope=\"row\">{user.username}</td>\n                  <td>{user.email}</td>\n                  <td>{user.role == \"admin\" ? (\n                    <button type=\"button\" className=\"btn btn-success\">{t(\"useradmin.admin\")}</button>\n                  ) : (\n                    <button type=\"button\" className=\"btn btn-info\">{t(\"useradmin.customer\")}</button>\n                  )}</td>\n                  <td>{user.status}</td>\n                  <td>\n                    <a href={\"/admin/users/\" + user.id} className=\"btn btn-primary\">Edit</a>\n                    {\n                      user.status == 1 ? (\n                        <a onClick={() => handleStatusClick(user.id)} className=\"btn btn-danger\">Unactive</a>\n                      ) : (\n                        <a onClick={() => handleStatusClick(user.id)} className=\"btn btn-success\">Active</a>\n                      )\n                    }\n\n                  </td>\n                </tr>\n              ))\n            }\n\n\n          </tbody>\n        </table>\n      </div>\n      <Pagination total={totalUser} handleClickPage={handleClickPage} limit={9} />\n    </div>\n  );\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}